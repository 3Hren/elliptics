#!/usr/bin/make -f
%:
	dh $@ --buildsystem=cmake

override_dh_auto_configure:
	DESTDIR="$(CURDIR)/debian/elliptics" dh_auto_configure \
		--buildsystem=cmake -- \
		-DCMAKE_INSTALL_PREFIX="/usr" \
		-DCMAKE_BUILD_TYPE=RelWithDebInfo

override_dh_auto_install:
	dh_auto_install \
		--destdir="$(CURDIR)/debian/elliptics"
		--buildsystem=cmake

override_dh_clean:
	#rm -rf $(CURDIR)/bindings/python/python/build
	dh_clean

override_dh_makeshlibs:
	dh_makeshlibs -V "elliptics (>= $(shell head -n1 debian/changelog |  sed -e 's/.*[(]//' | sed -e 's/[)].*//' | tr -d '\n' | cut -d . -f 1-3))"

override_dh_strip:
	dh_strip --dbg-package=elliptics-dbg
	#dh_installdocs
	#dh_installexamples
	#dh_installman
	#dh_link
